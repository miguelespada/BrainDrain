
<html> 
 <meta name="tipo_contenido"  content="text/html;" http-equiv="content-type" charset="utf-8">
<head> 
    <script src="lib/jquery-1.8.0.min.js"></script> 
    <script src="lib/jquery.form.js"></script> 
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
 
    <script> 
        $(document).ready(function() { 
     var options = { 
        target:        '#result'   // target element(s) to be updated with server response 
        //beforeSubmit:  showRequest,  // pre-submit callback 
        //success:       showResponse  // post-submit callback 
 
        // other available options: 
        //url:       url         // override for form's 'action' attribute 
        //type:      type        // 'get' or 'post', override for form's 'method' attribute 
        //dataType:  null        // 'xml', 'script', or 'json' (expected server response type) 
        //clearForm: true        // clear all form fields after successful submit 
        //resetForm: true        // reset the form after successful submit 
 
        // $.ajax options can be used here too, for example: 
        //timeout:   3000 
        }; 

        $('#myForm').ajaxForm(options); 
    }); 
 
// pre-submit callback 
function showRequest(formData, jqForm, options) { 
    return true; 
} 
 
// post-submit callback 
function showResponse(responseText, statusText, xhr, $form)  { 
} 

    </script> 
</head> 

<body>
<form id="myForm" action="backend/insert.php" method="post"> 
    <ul>
    <li>Origen: <input id="origen" type="text" name="origen"/> <span id="output1"> </span>
 </li>
    <li>Destino: <input id="destino" type="text" name="destino" /> <span id="output2"> </span> </li>
    <li>Fecha: <select name="fecha">
                    <option value="2007">2007</li>
                    <option value="2008">2008</li>
                    <option value="2009">2009</li>
                    <option value="2010">2010</li>
                    <option value="2011">2011</li>
                    <option value="2012">2012</li>
                    <option value="2013">2013</li>
                </select>
    <li>Profesion: <select name="profesion">
                    <option value="sociales">Ciencias Sociales y Jurídicas: derecho, económicas, empresariales, turismo,...</option>
                    <option value="artes">Artes: Bellas artes, diseño, artes performativas, cine,...</option>
                    <option value="ingenierias">Ingenierías y arquitectura: informática, telecomunicaciones,...</option>
                    <option value="salud">Ciencias de la salud: Medicina, enfermería, veterinaria, psicología,...</option>
                    <option value="humanidades">Humanidades: filosofía, filología, antropología, periodismo,...</option>
                    <option value="ciencias">Ciencias: física, matemáticas, biológicas,...</option>
                    <option value="otras">Otras,...</option>
                   </select>
        <li id = "mensaje"> Mensaje: <input type="text" name="mensaje" /> </li>
    </li>
    <li><input type="submit" value="Submit Comment" /> </li>
    </ul>
    <div id="result"> <div>
</form>
<script>

function showAddress(location, target) {
  var str = "";
  var inSpain = -1;
  if(location == "") return;
  geocoder = new google.maps.Geocoder();
  if (geocoder) {
    geocoder.geocode( { 'address': location, 'region' : 'es'}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
            var latlng = new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng() );
            str = results[0].formatted_address;
            inSpain = results[0].formatted_address.indexOf("Spain") != -1;
            if(inSpain) str+= " sí está en España. ";
            else str+= " no está en España. "
            str += " <strong>Lat:</strong> "+ parseInt(latlng.lat() * 10);
            str += " <strong>Lng:</strong> "+ parseInt(latlng.lng() * 10);
        } else {
          str = "No hay resultados";
        }
      } else {
        str = "Error en geolocalización: " + status;
      }
      target.html(str)
    });

  }
}
$('#origen').blur(function() {
        showAddress($('#origen').val(), $('#output1'));
});
$('#destino').blur(function() {
        showAddress($('#destino').val(), $('#output2'));
});
</script>
</body>
</html>