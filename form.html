
<html> 
 <meta name="tipo_contenido"  content="text/html;" http-equiv="content-type" charset="utf-8">
<head> 
    <script src="lib/jquery-1.8.0.min.js"></script> 
    <script src="lib/jquery.form.js"></script> 
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
 
    <script> 
        $(document).ready(function() { 
     var options = { 
        target:        '#output1'   // target element(s) to be updated with server response 
        //beforeSubmit:  showRequest,  // pre-submit callback 
        //success:       showResponse  // post-submit callback 
 
        // other available options: 
        //url:       url         // override for form's 'action' attribute 
        //type:      type        // 'get' or 'post', override for form's 'method' attribute 
        //dataType:  null        // 'xml', 'script', or 'json' (expected server response type) 
        //clearForm: true        // clear all form fields after successful submit 
        //resetForm: true        // reset the form after successful submit 
 
        // $.ajax options can be used here too, for example: 
        //timeout:   3000 
        }; 

        $('#myForm').ajaxForm(options); 
    }); 
 
// pre-submit callback 
function showRequest(formData, jqForm, options) { 
    return true; 
} 
 
// post-submit callback 
function showResponse(responseText, statusText, xhr, $form)  { 
} 

    </script> 
</head> 

<body>
<form id="myForm" action="test.php" method="post"> 
    <ul>
    <li>Origen: <input id="origen" type="text" name="origen"/> </li>
    <li>Destino: <input id="destino" type="text" name="destino" /> </li>
    <li>Sexo: <input type="text" name="sexo" /> </li>
    <li>Fecha: <input type="text" name="fecha" /> </li>
    <li>Twitt: <input type="text" name="twitt" /> </li>
    <li>Profesion: <input type="text" name="profesion" /> </li>
    <li><input type="submit" value="Submit Comment" /> </li>
    </ul>
</form>
<div id="output1">A</div>
<div id="output2">B</div>
<script>

function showAddress(location) {
  var str = "";
  geocoder = new google.maps.Geocoder();
  if (geocoder) {
    geocoder.geocode( { 'address': location, 'region' : 'es'}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
            var latlng = new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng() );
            str = results[0].formatted_address;
            str += "<br><strong>Lat:</strong> "+ parseInt(latlng.lat() * 10);
            str += "<br><strong>Lng:</strong> "+ parseInt(latlng.lng() * 10);

            var inSpain = results[0].formatted_address.indexOf("Spain") != -1;
            if(!inSpain)
                str += "<br><b>ERROR: La ciudad origen no está en España</b>\n";
            else
                str += "<br><b>ERROR: La ciudad destino está en España</b>\n";
            
            
        } else {
          str = "No hay resultados";
        }
      } else {
        str = "Error en geolocalización: " + status;
      }
    });
  }
  console.log(str);
}

$('#origen').blur(function() {
    showAddress($('#origen').val());
});
$('#destino').blur(function() {
    showAddress($('#destino').val());
    
});
</script>
</body>
</html>